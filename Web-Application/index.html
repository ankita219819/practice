<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Login Form</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    

  <form class="box" action="home.html" method="post" name="form1" onsubmit="return valid()">
    <h1>Login</h1>
    <input type="text" id="uname" name="uname" placeholder="Username" required>
    <input type="password" id="pwd" name="pwd" placeholder="Password" required>
    <span id="msg"></span>
    <input type="submit" name="sub" value="Login">
    <input type="button" name="can" value="Cancel">
    new user?<a href="Register.html">Register</a>
  </form>



  <script type="text/javascript">
    
    function valid(){
      var userExist = false;
      let msg;
      var users = JSON.parse(localStorage.getItem('Users')) || [];
            var loginuserName = document.getElementById("uname").value;
            var userPwd = document.getElementById("pwd").value;
            for (var key in users) {
              console.log(key)
                if (users.hasOwnProperty(key)) {
                  console.log(users[key]);
                    var innerUserObj = users[key];
                    for (var key in innerUserObj) { //key = 0 for email and key = 3 for password
                      console.log(innerUserObj[key][0])
                        if ((key == 2) && (innerUserObj[key] == loginuserName)) {
                            key = 3;
                            if ((key == 3) && (innerUserObj[key] == userPwd)) {
                                userExist = true;
                            }
                        }
                    }
                }
              }
              if (userExist == true) {
                alert("Succesful login");
                return true;
              }
                else{
                  alert("Email / Password is Invalid. Please Register to create a account");
                  return false;
                }
    }
  </script>


  </body>
</html>
